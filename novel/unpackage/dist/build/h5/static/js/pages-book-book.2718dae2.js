(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-book-book"],{"0814":function(t,e,o){"use strict";o.r(e);var a=o("20d1"),i=o("a7d0");for(var n in i)"default"!==n&&function(t){o.d(e,t,(function(){return i[t]}))}(n);o("4e19");var s,c=o("f0c5"),r=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"281fe818",null,!1,a["a"],s);e["default"]=r.exports},"20d1":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return a}));var a={vTabs:o("edd6").default,titleList:o("0fad").default},i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"book_content"},[o("v-uni-view",{staticClass:"head"},[o("v-uni-view",{staticClass:"left"},[o("h3",[t._v(t._s(t.bookData.name))]),o("p",[t._v(t._s(t.bookData.author))]),o("p",{staticClass:"info"},[t._v(t._s(t.bookData.categoryName)+" · 完结 · "+t._s(t._f("formatNumber")(t.bookData.total/1e4))+"万字")])]),o("v-uni-view",{staticClass:"right"},[o("v-uni-image",{staticClass:"img",attrs:{mode:"scaleToFill",src:t.bookData.imgSrc}})],1)],1),o("v-uni-view",{staticClass:"tips"},[o("v-uni-view",{staticClass:"top"},[o("v-uni-view",{staticClass:"left"},[o("span",{staticClass:"score"},[t._v(t._s(t.bookData.score))]),o("span",[t._v("评分")]),o("p",{staticClass:"iconfont icon-shijian1"})]),o("v-uni-view",{staticClass:"right"},[o("span",{staticClass:"num"},[t._v(t._s(t.bookData.readNum))]),o("span",[t._v("人")]),o("p",[t._v("正在阅读")])])],1)],1),o("v-tabs",{attrs:{tabs:t.tabs,fontSize:"34rpx",lineScale:.3,lineHeight:"8rpx",lineColor:"#FFD014",color:"#808080",activeColor:"#333333"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeNav.apply(void 0,arguments)}},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}}),o("v-uni-swiper",{ref:"swiper",staticClass:"swiper",attrs:{duration:t.duration,current:t.swiperCurrent},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.slideChange.apply(void 0,arguments)}}},[o("v-uni-swiper-item",[o("v-uni-view",{staticClass:"chapter-title"},[t._v(t._s(t.recChapterData.title))]),o("v-uni-scroll-view",{ref:"scrollViewBook",staticClass:"scroll-book",attrs:{"scroll-top":t.scrollTop,"scroll-y":"true"}},[o("v-uni-view",{ref:"item1",staticClass:"item_content",domProps:{innerHTML:t._s(t.recChapterData.content)}})],1)],1),o("v-uni-swiper-item",[o("v-uni-view",{ref:"item2",staticClass:"item_list"},[o("title-list",{attrs:{titleListData:t.titleListData,bookData:t.bookData}})],1)],1)],1),o("v-uni-view",{staticClass:"footer"},[o("v-uni-view",[t.addBookShelf?o("p",{staticClass:"add_to_shelf"},[o("span",{staticClass:"iconfont icon-shijian"}),o("span",[t._v("已加入")])]):o("p",{staticClass:"add_to_shelf",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addToShelf.apply(void 0,arguments)}}},[o("span",{staticClass:"iconfont icon-shijian"}),o("span",[t._v("加入书架")])])]),o("v-uni-navigator",{attrs:{url:"/pages/details/details?bookId="+t.bookData.id+"&chapterNum=1"}},[o("p",{staticClass:"read",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.readHandle(t.bookData.id)}}},[t._v("免费阅读")])])],1)],1)},n=[]},"2b61":function(t,e,o){"use strict";var a=o("4ea4");o("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a(o("00d1"));var i=a(o("7f90")),n={data:function(){return{scrollTop:0,currentTab:0,tabs:["详情","目录"],duration:500,addBookShelf:!1,swiperCurrent:0,item1_h:0,item2_h:1,tabStatus1:!1,bookData:{},recChapterData:{},titleListData:[]}},methods:{changeNav:function(t){var e=this;this.swiperCurrent=-1,this.tabStatus1||1!==t||(this.tabStatus1=!0,this.firstShow(this.bookData.id)),setTimeout((function(){e.swiperCurrent=t}),0)},slideChange:function(t){this.currentTab=t.detail.current,this.tabStatus1||1!==t.detail.current||(this.tabStatus1=!0,this.firstShow(this.bookData.id))},getSwiperItemH:function(t){var e=t.offsetHeight+50;return e<300&&(e=300),this.$refs.swiper.$el.style.height=e+"px",e},addToShelf:function(){var t=this,e=uni.getStorageSync("userId");e?i.default.addToShelf({userId:e,num:1,bookId:this.bookData.id},(function(e){console.log(e),e?(t.isBookShelfed(t.bookData.id),uni.showToast({title:"加入书架成功",position:"bottom"})):uni.showToast({title:"加入书架失败",position:"bottom"})})):uni.navigateTo({url:"/pages/login/login"})},firstShow:function(t){var e=this;i.default.getChapter({id:t},(function(t){e.titleListData=t.data}))},isBookShelfed:function(t){var e=this,o="";uni.getStorage({key:"userId",success:function(a){o=a.data,i.default.get("/bookshelf/exits",{userId:o,bookId:t},(function(t){console.log(t.data),t.data&&(e.addBookShelf=!0)}))}})},readHandle:function(t){i.default.put("/common/read",{bookId:t})}},onLoad:function(t){var e=this;console.log(t.id),uni.showLoading({title:"加载中"}),setTimeout((function(){uni.hideLoading()}),1e4),i.default.getBook({id:t.id},(function(t){console.log(t),e.bookData=t.data.data[0]})),i.default.getRecChapter({bookId:t.id,num:1},(function(t){console.log("jinlai"),e.recChapterData=t.data[0],uni.hideLoading(),e.getSwiperItemH(e.$refs.item1.$el)})),uni.getStorage({key:"token",success:function(o){o.data;console.log("sssaf"),e.isBookShelfed(t.id)}})},onReady:function(){console.log("red");var t=uni.createSelectorQuery().in(this);console.log(t.select(".item_content")._component.$refs.item1.$el)},mounted:function(){console.log("mounted");var t="adas1a";t=parseInt(t),console.log(t),t&&console.log("jinlai")}};e.default=n},"4e19":function(t,e,o){"use strict";var a=o("f4c1"),i=o.n(a);i.a},a7d0:function(t,e,o){"use strict";o.r(e);var a=o("2b61"),i=o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},c02c:function(t,e,o){var a=o("24fb");e=a(!1),e.push([t.i,".book_content[data-v-281fe818]{width:%?748?%;letter-spacing:%?4?%}.book_content .swiper[data-v-281fe818],\n.book_content .uni-swiper-item[data-v-281fe818]{height:%?600?%}.book_content .head[data-v-281fe818]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;background-color:#8c4e49;color:#fff;padding:%?40?% %?30?%}.book_content .head .left h3[data-v-281fe818]{font-size:%?40?%;font-weight:500;margin-bottom:%?30?%}.book_content .head .left p[data-v-281fe818]{font-size:%?30?%;color:#d4d0d0;margin-bottom:%?30?%;letter-spacing:%?1?%}.book_content .head .left .info[data-v-281fe818]{margin-top:%?130?%;margin-bottom:0}.book_content .head .right .img[data-v-281fe818]{width:%?210?%;height:%?290?%;border-radius:%?10?%}.book_content .tips[data-v-281fe818]{padding:%?30?% 0 0 0;background-color:#fff;margin-bottom:%?24?%}.book_content .tips .top[data-v-281fe818]{text-align:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?20?% %?110?%;border-bottom:1px solid #ebeef5}.book_content .tips .top p[data-v-281fe818]{font-size:%?32?%;margin-top:%?16?%;margin-bottom:%?16?%}.book_content .tips .top span[data-v-281fe818]{font-size:%?32?%;color:grey}.book_content .tips .top .left .score[data-v-281fe818]{font-size:%?46?%;font-weight:700;color:#333;margin-right:%?8?%}.book_content .tips .top .right p[data-v-281fe818]{color:grey;line-height:%?40?%}.book_content .tips .top .right .num[data-v-281fe818]{font-size:%?46?%;font-weight:700;color:#333;margin-right:%?8?%}.book_content .tips .bottom[data-v-281fe818]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.book_content .tips .bottom p[data-v-281fe818]{font-size:%?32?%;padding:%?40?% %?14?%}.book_content .tips .bottom .rank[data-v-281fe818]{color:#dd524d;font-weight:600;font-size:%?36?%}.book_content .tips .bottom .iconfont[data-v-281fe818]{font-size:%?28?%;margin-right:%?30?%;line-height:%?44?%;padding:%?40?% %?14?%;color:silver}.book_content .scroll-book[data-v-281fe818]{height:%?800?%}.book_content .chapter-title[data-v-281fe818],\n.book_content .item_content[data-v-281fe818]{padding:%?30?%;background-color:#fff;line-height:%?50?%}.book_content .chapter-title .content-p[data-v-281fe818],\n.book_content .item_content .content-p[data-v-281fe818]{margin-top:%?30?%;margin-bottom:%?30?%}.book_content .item_list[data-v-281fe818]{background-color:#fff}.book_content .footer[data-v-281fe818]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?20?% 0;position:fixed;bottom:%?0?%;background-color:#fff}.book_content .footer p[data-v-281fe818]{padding:%?20?% %?60?%;font-size:%?34?%;margin:0 %?30?%}.book_content .footer .add_to_shelf[data-v-281fe818]{line-height:%?40?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;padding:%?20?% %?30?%;border:1px solid silver;border-radius:%?50?%}.book_content .footer .add_to_shelf .iconfont[data-v-281fe818]{margin-right:%?14?%}.book_content .footer .read[data-v-281fe818]{border-radius:%?50?%;background-color:#ffd014}.v-tabs[data-v-281fe818]{border-bottom:%?1?% solid #e6e6e6}",""]),t.exports=e},f4c1:function(t,e,o){var a=o("c02c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=o("4f06").default;i("2ec41967",a,!0,{sourceMap:!1,shadowMode:!1})}}]);