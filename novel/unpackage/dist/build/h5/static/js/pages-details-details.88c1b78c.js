(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-details-details","components-chapter-list-chapter-list"],{"0676":function(t,e,a){"use strict";a("26e9"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{bookData:{type:Object,default:null},chapterListData:{type:Array,default:function(){return[]}}},data:function(){return{scrollTop:0,orderDesc:!0}},methods:{bookStatus:function(){switch(this.bookData.status){case 0:return"连载中";case 1:return"完结";case 2:return"停更"}},shadowBoxClick:function(){uni.$emit("clickShadow",{})},selectChapter:function(t){uni.$emit("clickShadow",{}),uni.$emit("selectChapter",{num:t})},orderChange:function(){this.orderDesc=!this.orderDesc,this.chapterListData=this.chapterListData.reverse()}},mounted:function(){var t=this;uni.getSystemInfo({success:function(e){t.$nextTick((function(){t.$refs.scrollView.$el.style.height=e.windowHeight+"px"}))}})}};e.default=i},"1d83":function(t,e,a){"use strict";a.r(e);var i=a("0676"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},2385:function(t,e,a){"use strict";var i=a("9336"),n=a.n(i);n.a},"60e2":function(t,e,a){"use strict";var i=a("ac4d"),n=a.n(i);n.a},"6f56":function(t,e,a){"use strict";a.r(e);var i=a("dfff"),n=a("f307");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("60e2");var s,c=a("f0c5"),r=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"1bd5d4fd",null,!1,i["a"],s);e["default"]=r.exports},"75ab":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".scroll-Y[data-v-4b508826]{height:%?500?%}.chapter-container[data-v-4b508826]{width:%?750?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;position:fixed;top:0;left:-500px;-webkit-transition:all .5s;transition:all .5s}.shadow-box[data-v-4b508826]{-webkit-box-flex:1;-webkit-flex:1 0;flex:1 0;background-color:#333;opacity:.5}.chapter-list[data-v-4b508826]{-webkit-box-flex:0;-webkit-flex:0 0 75%;flex:0 0 75%;background-color:#fefefe;padding:%?30?%}.chapter-list .chapter-list-top[data-v-4b508826]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.chapter-list .chapter-list-top .img[data-v-4b508826]{width:%?120?%;height:%?170?%;border-radius:%?6?%;margin-right:%?20?%}.chapter-list .chapter-list-top .name[data-v-4b508826]{color:#333}.chapter-list .chapter-list-top .author[data-v-4b508826]{font-size:%?30?%;color:#555;margin-top:%?20?%}.chapter-list .chapter-list-middle[data-v-4b508826]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:%?30?% 0}.chapter-list .chapter-list-middle .left[data-v-4b508826]{color:#999;font-size:%?26?%}.chapter-list .chapter-list-middle .left .fenge[data-v-4b508826]{color:silver;font-size:%?20?%;line-height:%?20?%;padding:0 %?8?%}.chapter-list .chapter-list-middle .right[data-v-4b508826]{font-size:%?26?%}.chapter-list .chapter-list-middle .right span[data-v-4b508826]{margin-right:%?14?%}.chapter-list .chapter-list-footer[data-v-4b508826]{font-size:%?28?%}.chapter-list .chapter-list-footer uni-view[data-v-4b508826]{border-top:%?1?% solid #f5f5f5;margin-right:%?12?%;padding:%?20?% 0}",""]),t.exports=e},"8ad7":function(t,e,a){"use strict";var i=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("c887")),o=i(a("7f90")),s=i(a("00d1")),c={components:{chapterList:n.default},data:function(){return{menuStatus:!0,dayOrNight:!0,backgroudColor:["#E6DFBD","#4EEE94","#FFF0F5","#40E0D0","#EED8AE"],fontSize:40,activeColor:0,ctrlBottomIndex:-1,bookData:{id:1,name:"九星霸体诀",authorName:"平凡的魔术师",status:0,imgSrc:"../../static/images/mingren.jpg"},addBookShelf:!1,chapterStatus:!1,screenWidth:0,chapterTotal:10,backNum:0,chapterData:{},chapterListData:[],controlStatus:!1}},methods:{changeMenuStatus:function(){this.ctrlBottomIndex=-1,this.menuStatus?this.$nextTick((function(){this.$refs.ctrlTop.$el.style.top="0",this.$refs.ctrlBottom.$el.style.bottom="0",this.menuStatus=!this.menuStatus})):this.$nextTick((function(){this.$refs.ctrlTop.$el.style.top=-this.$refs.ctrlTop.$el.offsetHeight+"px",this.$refs.ctrlBottom.$el.style.bottom=-this.$refs.ctrlBottom.$el.offsetHeight+"px",this.menuStatus=!this.menuStatus}))},chapterHandle:function(t){this.getChapterReq(this.bookData.id,this.chapterData.chapterNum+t),uni.pageScrollTo({scrollTop:0,duration:100})},selectChapter:function(t){this.getChapterReq(this.bookData.id,t.num),uni.pageScrollTo({scrollTop:0,duration:100})},changeDayNight:function(){this.ctrlBottomIndex=2,this.dayOrNight=!this.dayOrNight,this.dayOrNight?(this.$refs.novelDetails.$el.style.backgroundColor=this.backgroudColor[this.activeColor],this.$refs.novelDetails.$el.style.color="#333",uni.setStorage({key:"dayOrNight",data:!0})):(this.$refs.novelDetails.$el.style.backgroundColor="#1B1D19",this.$refs.novelDetails.$el.style.color="#fff",uni.setStorage({key:"dayOrNight",data:!1}))},colorActive:function(t){return this.activeColor===t?"active":""},changeFontSize:function(t){this.fontSize+=t,this.fontSize<=28||this.fontSize>=70?this.fontSize-=t:(uni.setStorage({key:"fontSize",data:this.fontSize}),this.$refs.novelContent.$el.style.fontSize=this.fontSize/2+"px")},showChapter:function(){var t=this;this.ctrlBottomIndex=1,this.chapterStatus=!0,this.menuStatus=!1,this.changeMenuStatus(),this.$nextTick((function(){this.$refs.chapterList.$el.style.left="0px"})),o.default.getChapter({id:this.bookData.id},(function(e){t.chapterListData=e.data}))},handleShadow:function(){this.ctrlBottomIndex=-1,this.chapterStatus=!1,this.$nextTick((function(){this.$refs.chapterList.$el.style.left=-this.screenWidth+"px"}))},changebackground:function(t){this.activeColor=t,this.$refs.novelDetails.$el.style.backgroundColor=this.backgroudColor[t],uni.setStorage({key:"backgroundColor",data:this.backgroudColor[t]})},backPage:function(){uni.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},getChapterReq:function(t,e,a){var i=this;e<0?uni.showToast({title:"已是第一章",position:"bottom"}):e>this.chapterTotal?uni.showToast({title:"已是最后一章",position:"bottom"}):(uni.showLoading({title:"加载中"}),this.controlStatus=!1,o.default.getRecChapter({bookId:t,num:e},(function(t){i.chapterData=t.data[0],console.log(i.chapterData),i.chapterData.content=s.default.pToView(i.chapterData.content,"data-v-1b0037f2"),uni.hideLoading(),i.$nextTick((function(){console.log(this.$refs),this.$refs.novelContent.$el.innerHTML=this.chapterData.content,console.log(this.chapterData.chapterNum),a&&a(),this.addBookShelf&&this.updateBookShelf(this.bookData.id,this.chapterData.chapterNum)}))})))},isBookShelfed:function(t){var e=this,a="";uni.getStorage({key:"userId",success:function(t){a=t.data}}),o.default.get("/bookshelf/exits",{userId:a,bookId:t},(function(t){t.data&&(e.addBookShelf=!0)}))},hasReadCard:function(t,e){var a="";uni.getStorage({key:"userId",success:function(t){a=t.data}}),o.default.get("/readcard/exits",{userId:a,bookId:t},(function(t){e&&e(t)}))},addToReadCard:function(t,e){var a="";uni.getStorage({key:"userId",success:function(t){a=t.data}}),o.default.post("/readcard",{userId:a,bookId:t},(function(t){e&&e(t)}))},updateReadCard:function(t,e){var a="";uni.getStorage({key:"userId",success:function(t){a=t.data}}),o.default.put("/readcard",{userId:a,bookId:t},(function(t){e&&e(t)}))},updateBookShelf:function(t,e){var a="";uni.getStorage({key:"userId",success:function(t){a=t.data}}),o.default.put("/bookshelf",{userId:a,bookId:t,chapterNum:e})}},onLoad:function(t){var e=this;uni.showLoading({title:"加载中"}),console.log(t),o.default.getBook({id:t.bookId},(function(t){console.log(t.data),e.bookData=t.data.data[0],e.chapterTotal=t.data.chapterTotal})),this.getChapterReq(t.bookId,t.chapterNum,(function(){e.controlStatus=!0})),uni.$on("clickShadow",this.handleShadow),uni.$on("selectChapter",this.selectChapter),uni.getStorage({key:"fontSize",success:function(t){e.fontSize=t.data,e.$nextTick((function(){this.$refs.novelContent.$el.style.fontSize=this.fontSize/2+"px"}))},fail:function(){uni.setStorage({key:"fontSize",data:40})}}),uni.getStorage({key:"backgroundColor",success:function(t){for(var a=0;a<e.backgroudColor.length;a++)if(e.backgroudColor[a]===t.data){e.activeColor=a,e.$nextTick((function(){this.$refs.novelDetails.$el.style.backgroundColor=this.backgroudColor[a]}));break}},fail:function(){uni.setStorage({key:"backgroundColor",data:e.backgroudColor[0]})}}),uni.getStorage({key:"dayOrNight",success:function(t){e.dayOrNight=!t.data,console.log(t.data,e.dayOrNight),e.$nextTick((function(){this.changeDayNight()}))},fail:function(){uni.setStorage({key:"dayOrNight",data:!0})}}),uni.getStorage({key:"token",success:function(a){a.data;e.isBookShelfed(t.bookId),e.hasReadCard(t.bookId,(function(a){console.log(a),a.data?e.updateReadCard(t.bookId):e.addToReadCard(t.bookId)}))}})},mounted:function(){var t=this;uni.getSystemInfo({success:function(e){t.screenWidth=e.windowWidth}}),this.$nextTick((function(){this.$refs.ctrlTop.$el.style.top=-this.$refs.ctrlTop.$el.offsetHeight+"px",this.$refs.ctrlBottom.$el.style.bottom=-this.$refs.ctrlBottom.$el.offsetHeight+"px",this.$refs.chapterList.$el.style.left=-this.screenWidth+"px"}))}};e.default=c},9336:function(t,e,a){var i=a("75ab");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("456e8800",i,!0,{sourceMap:!1,shadowMode:!1})},ac4d:function(t,e,a){var i=a("f5af");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("0f98c8b6",i,!0,{sourceMap:!1,shadowMode:!1})},c887:function(t,e,a){"use strict";a.r(e);var i=a("d108"),n=a("1d83");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("2385");var s,c=a("f0c5"),r=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"4b508826",null,!1,i["a"],s);e["default"]=r.exports},d108:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{ref:"chapterContainer",staticClass:"chapter-container"},[a("v-uni-view",{staticClass:"chapter-list"},[a("v-uni-navigator",{attrs:{url:"../../pages/book/book?id="+t.bookData.id}},[a("v-uni-view",{staticClass:"chapter-list-top"},[a("v-uni-image",{staticClass:"img",attrs:{src:t.bookData.imgSrc}}),a("v-uni-view",[a("v-uni-view",{staticClass:"name"},[t._v(t._s(t.bookData.name))]),a("v-uni-view",{staticClass:"author"},[t._v(t._s(t.bookData.authorName))])],1)],1)],1),a("v-uni-view",{staticClass:"chapter-list-middle"},[a("p",{staticClass:"left"},[a("span",[t._v(t._s(t.bookStatus()))]),a("span",{staticClass:"fenge"},[t._v("|")]),a("span",[t._v("共3598章")])]),a("p",{staticClass:"right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.orderChange()}}},[a("span",{class:t.orderDesc?"iconfont icon-shunxu-copy":"iconfont icon-shunxu"}),a("span",[t._v(t._s(t.orderDesc?"顺序":"倒序"))])])]),a("v-uni-view",{staticClass:"chapter-list-footer"},[a("v-uni-scroll-view",{ref:"scrollView",staticClass:"scroll-Y",attrs:{"scroll-top":t.scrollTop,"scroll-y":"true"}},t._l(t.chapterListData,(function(e){return a("v-uni-view",{key:e.id,on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.selectChapter(e.chapterNum)}}},[t._v(t._s(e.title))])})),1)],1)],1),a("v-uni-view",{staticClass:"shadow-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shadowBoxClick.apply(void 0,arguments)}}})],1)},o=[]},dfff:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={chapterList:a("c887").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{ref:"novelDetails",staticClass:"novel-details"},[a("v-uni-view",{staticClass:"novel-title"},[t._v(t._s(t.chapterData.title))]),a("v-uni-view",{ref:"novelContent",staticClass:"novel-content",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeMenuStatus()}}}),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.controlStatus,expression:"controlStatus"}],staticClass:"novel-footer"},[a("span",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chapterHandle(-1)}}},[t._v("上一章")]),a("span",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chapterHandle(1)}}},[t._v("下一章")])])],1),a("v-uni-view",[a("v-uni-view",{ref:"ctrlTop",staticClass:"ctrl-top"},[a("v-uni-view",{staticClass:"back-prev",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backPage.apply(void 0,arguments)}}},[a("span",{staticClass:"iconfont icon-fanhui_xia"})])],1),a("v-uni-view",{ref:"ctrlBottom",staticClass:"ctrl-bottom"},[a("v-uni-view",{staticClass:"select-content"},[3===t.ctrlBottomIndex?a("v-uni-view",{staticClass:"chapter-ctrl"},[a("span",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chapterHandle(-1)}}},[t._v("上一章")]),a("span",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chapterHandle(1)}}},[t._v("下一章")])]):t._e(),4===t.ctrlBottomIndex?a("v-uni-view",{staticClass:"setting"},[a("v-uni-view",[a("span",{staticClass:"title"},[t._v("字号")]),a("p",[a("span",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeFontSize(-6)}}},[t._v("A-")]),a("span",{staticClass:"font-fize"},[t._v(t._s(t.fontSize))]),a("span",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeFontSize(6)}}},[t._v("A+")])])]),a("v-uni-view",{staticClass:"background"},[a("span",{staticClass:"title"},[t._v("背景")]),a("p",t._l(t.backgroudColor,(function(e,i){return a("v-uni-view",{key:i,class:t.activeColor===i?"active":""},[a("span",{style:"background-color: "+e+";",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changebackground(i)}}})])})),1)])],1):t._e()],1),a("v-uni-view",{staticClass:"ctrl-menu"},[a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showChapter()}}},[a("span",{staticClass:"iconfont icon-mulu"}),a("div",[t._v("目录")])]),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeDayNight()}}},[a("span",{class:t.dayOrNight?"iconfont icon-rijian":"iconfont icon-yejian"}),a("div",[t._v(t._s(t.dayOrNight?"日间":"夜间"))])]),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ctrlBottomIndex=3}}},[a("span",{staticClass:"iconfont icon-jindu1"}),a("div",[t._v("进度")])]),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ctrlBottomIndex=4}}},[a("span",{staticClass:"iconfont icon-xitongshezhi"}),a("div",[t._v("设置")])])],1)],1)],1),a("chapter-list",{ref:"chapterList",attrs:{chapterListData:t.chapterListData,bookData:t.bookData}})],1)},o=[]},f307:function(t,e,a){"use strict";a.r(e);var i=a("8ad7"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},f5af:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".novel-details[data-v-1bd5d4fd]{background-color:#e6dfbd;padding:%?50?% %?36?% %?50?% %?46?%}.novel-details .novel-title[data-v-1bd5d4fd]{margin:%?20?% 0;margin-right:%?12?%;font-weight:200;font-size:%?30?%}.novel-details .novel-content[data-v-1bd5d4fd]{font-weight:400;letter-spacing:%?1?%;font-size:%?40?%}.novel-details .novel-content .content-p[data-v-1bd5d4fd]{text-indent:2em;text-align:justify;margin-bottom:%?30?%;margin-top:%?30?%}.novel-details .novel-footer[data-v-1bd5d4fd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.novel-details .novel-footer span[data-v-1bd5d4fd]{padding:%?20?% %?30?%}.ctrl-top[data-v-1bd5d4fd]{width:%?750?%;position:fixed;top:%?-120?%;z-index:999;color:#fff;background-color:#333;-webkit-transition:all .5s;transition:all .5s}.ctrl-top .back-prev[data-v-1bd5d4fd]{padding:%?30?% %?50?%}.ctrl-bottom[data-v-1bd5d4fd]{width:%?750?%;position:fixed;bottom:%?-445?%;z-index:999;color:#fff;background-color:#333;-webkit-transition:all .5s;transition:all .5s}.ctrl-bottom .select-content[data-v-1bd5d4fd]{font-size:%?30?%}.ctrl-bottom .select-content .chapter-ctrl[data-v-1bd5d4fd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.ctrl-bottom .select-content .chapter-ctrl span[data-v-1bd5d4fd]{padding:%?30?% %?70?%}.ctrl-bottom .select-content .setting uni-view[data-v-1bd5d4fd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?20?% 0;padding-left:%?70?%}.ctrl-bottom .select-content .setting uni-view p span[data-v-1bd5d4fd]{border:%?2?% solid #fff;padding:%?8?% %?40?%;border-radius:%?50?%}.ctrl-bottom .select-content .setting uni-view p .font-fize[data-v-1bd5d4fd]{border:none;color:silver}.ctrl-bottom .select-content .setting .background p[data-v-1bd5d4fd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.ctrl-bottom .select-content .setting .background p uni-view[data-v-1bd5d4fd]{padding:%?5?%;margin-right:%?35?%;border:%?2?% solid #333;border-radius:50%}.ctrl-bottom .select-content .setting .background p uni-view span[data-v-1bd5d4fd]{display:inline-block;padding:%?30?%;border-radius:50%}.ctrl-bottom .select-content .setting .background p uni-view.active[data-v-1bd5d4fd]{border:%?2?% solid #fff}.ctrl-bottom .select-content .title[data-v-1bd5d4fd]{font-size:%?34?%;margin-right:%?30?%}.ctrl-bottom .ctrl-menu[data-v-1bd5d4fd]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.ctrl-bottom .ctrl-menu uni-view[data-v-1bd5d4fd]{-webkit-box-flex:0;-webkit-flex:0 0 25%;flex:0 0 25%;text-align:center;padding:%?30?% 0}.ctrl-bottom .ctrl-menu uni-view div[data-v-1bd5d4fd]{font-size:%?25?%}",""]),t.exports=e}}]);