(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bookShelf-bookShelf"],{"0335":function(t,e,o){"use strict";o.r(e);var a=o("b627"),n=o.n(a);for(var i in a)"default"!==i&&function(t){o.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},"0bd2":function(t,e,o){"use strict";var a;o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",[o("v-uni-view",{staticClass:"edit-nav"},[o("v-uni-view",[t.editStatus?o("v-uni-button",{staticClass:"btn-edit",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editHandle.apply(void 0,arguments)}}},[t._v("编辑")]):o("v-uni-button",{staticClass:"btn-success",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.successHandle.apply(void 0,arguments)}}},[t._v("完成")])],1)],1),o("v-uni-view",{staticClass:"bookShelf"},[o("v-uni-checkbox-group",t._l(t.bookShelfData,(function(e,a){return o("v-uni-view",{key:e.id,staticClass:"book"},[o("v-uni-navigator",{staticClass:"e-navigator",attrs:{url:"/pages/details/details?bookId="+e.bookId+"&chapterNum="+e.chapterNum}},[o("v-uni-image",{staticClass:"img",attrs:{src:e.imgSrc}}),o("v-uni-view",{staticClass:"info"},[o("span",{staticClass:"name"},[t._v(t._s(e.name))]),o("span",{staticClass:"author"},[t._v(t._s(e.author))]),o("span",{staticClass:"status"},[t._v(t._s(t.bookStatus(e.status)))])])],1),t.editStatus?t._e():o("v-uni-view",{staticClass:"del-checkbox",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkBoxHandle(a)}}},[o("v-uni-checkbox",{staticClass:"del-btn",attrs:{checked:e.checkBox}})],1)],1)})),1)],1)],1)},i=[]},4107:function(t,e,o){"use strict";o.r(e);var a=o("0bd2"),n=o("0335");for(var i in n)"default"!==i&&function(t){o.d(e,t,(function(){return n[t]}))}(i);o("f4a8");var s,l=o("f0c5"),c=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"47bb0e5a",null,!1,a["a"],s);e["default"]=c.exports},"70c2":function(t,e,o){var a=o("8680");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=o("4f06").default;n("0d1042d8",a,!0,{sourceMap:!1,shadowMode:!1})},8680:function(t,e,o){var a=o("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-47bb0e5a]{background-color:#fff}.edit-nav[data-v-47bb0e5a]{margin:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;position:fixed;top:%?0?%;right:%?20?%;z-index:1000}.bookShelf[data-v-47bb0e5a]{padding:%?20?% %?30?%}.bookShelf .book[data-v-47bb0e5a]{position:relative}.bookShelf .book .del-checkbox[data-v-47bb0e5a]{width:%?750?%;height:100%;position:absolute;top:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center;z-index:56}.bookShelf .book .del-checkbox .del-btn[data-v-47bb0e5a]{margin-right:%?100?%}.bookShelf .book .e-navigator[data-v-47bb0e5a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;border-bottom:1px solid #f5f5f5;padding:%?30?% 0}.bookShelf .book .e-navigator .img[data-v-47bb0e5a]{width:%?147?%;height:%?200?%;margin-right:%?20?%;border-radius:%?6?%}.bookShelf .book .e-navigator span[data-v-47bb0e5a]{display:block;letter-spacing:%?1?%}.bookShelf .book .e-navigator .name[data-v-47bb0e5a]{font-size:%?42?%}.bookShelf .book .e-navigator .author[data-v-47bb0e5a]{font-size:%?27?%;color:grey;margin-top:%?20?%}.bookShelf .book .e-navigator .status[data-v-47bb0e5a]{font-size:%?30?%;margin-top:%?50?%}body.?%PAGE?%[data-v-47bb0e5a]{background-color:#fff}",""]),t.exports=e},b627:function(t,e,o){"use strict";var a=o("4ea4");o("d3b7"),o("25f0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(o("7f90")),i={data:function(){return{editStatus:!0,bookShelfData:[]}},methods:{bookStatus:function(t){switch(t){case 0:return"已完结";case 1:return"待更新";case 2:return"停更"}},editHandle:function(){this.editStatus=!1,console.log(this.editStatus)},successHandle:function(){this.editStatus=!0;for(var t=[],e=0;e<this.bookShelfData.length;e++)!0===this.bookShelfData[e].checkBox&&(console.log(e),t.push(this.bookShelfData[e].id));this.delBookShelf(t)},checkBoxHandle:function(t){console.log(t),this.bookShelfData[t].checkBox=!this.bookShelfData[t].checkBox},reqBookShelf:function(t){var e=this,o="";uni.getStorage({key:"userId",success:function(t){o=t.data}}),n.default.get("/bookshelf",{userId:o},(function(o){console.log(o.data),e.bookShelfData=o.data,t&&t()}))},delBookShelf:function(t){var e=this,o="",a="";uni.getStorage({key:"userId",success:function(t){o=t.data}}),uni.getStorage({key:"token",success:function(t){a=t.data}}),n.default.post("/bookshelf/delete",{userId:o,token:a,id:t},(function(t){t&&e.reqBookShelf()}))}},onShow:function(){var t=this;uni.getStorage({key:"token",fail:function(e){t.bookShelfData=[],uni.redirectTo({url:"/pages/login/login"})}}),this.bookShelfData.length>0||this.reqBookShelf()},onLoad:function(){var t=this;uni.getStorage({key:"token",fail:function(e){t.bookShelfData=[],uni.redirectTo({url:"/pages/login/login"})}}),this.reqBookShelf()},onPullDownRefresh:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;uni.getStorage({key:"token",fail:function(e){t.bookShelfData=[],uni.redirectTo({url:"/pages/login/login"})}}),this.reqBookShelf((function(){onPullDownRefresh()}))}))};e.default=i},f4a8:function(t,e,o){"use strict";var a=o("70c2"),n=o.n(a);n.a}}]);