(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/details/details"],{"6f56":function(t,o,a){"use strict";a.r(o);var e=a("9673"),n=a("f307");for(var i in n)"default"!==i&&function(t){a.d(o,t,(function(){return n[t]}))}(i);a("c9c3");var c,r=a("f0c5"),s=Object(r["a"])(n["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],c);o["default"]=s.exports},"7e97":function(t,o,a){},9673:function(t,o,a){"use strict";a.d(o,"b",(function(){return n})),a.d(o,"c",(function(){return i})),a.d(o,"a",(function(){return e}));var e={chapterList:function(){return a.e("components/chapter-list/chapter-list").then(a.bind(null,"c887"))}},n=function(){var t=this,o=t.$createElement;t._self._c;t._isMounted||(t.e0=function(o){t.ctrlBottomIndex=3},t.e1=function(o){t.ctrlBottomIndex=4})},i=[]},b063:function(t,o,a){"use strict";(function(t){a("b9b0");e(a("66fd"));var o=e(a("6f56"));function e(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,a("543d")["createPage"])},c9c3:function(t,o,a){"use strict";var e=a("7e97"),n=a.n(e);n.a},f307:function(t,o,a){"use strict";a.r(o);var e=a("f6c8"),n=a.n(e);for(var i in e)"default"!==i&&function(t){a.d(o,t,(function(){return e[t]}))}(i);o["default"]=n.a},f6c8:function(t,o,a){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=n(a("7f90"));n(a("00d1"));function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){a.e("components/chapter-list/chapter-list").then(function(){return resolve(a("c887"))}.bind(null,a)).catch(a.oe)},c={components:{chapterList:i},data:function(){return{menuStatus:!1,dayOrNight:!0,backgroudColor:["#E6DFBD","#4EEE94","#FFF0F5","#40E0D0","#EED8AE"],backgroundClass:"background0",fontSize:40,fontClass:"font40",activeColor:0,ctrlBottomIndex:-1,bookData:{id:1,name:"九星霸体诀",authorName:"平凡的魔术师",status:0,imgSrc:"../../static/images/mingren.jpg"},addBookShelf:!1,chapterStatus:!1,screenWidth:0,chapterTotal:1e5,backNum:0,chapterData:{},chapterListData:[],controlStatus:!1,chapterListShow:!1}},methods:{changeMenuStatus:function(){this.ctrlBottomIndex=-1,this.menuStatus=!this.menuStatus},chapterHandle:function(o){this.getChapterReq(this.bookData.id,this.chapterData.chapterNum+o),t.pageScrollTo({scrollTop:0,duration:100})},selectChapter:function(o){this.getChapterReq(this.bookData.id,o.num),t.pageScrollTo({scrollTop:0,duration:100})},changeDayNight:function(){this.ctrlBottomIndex=2,this.dayOrNight=!this.dayOrNight,this.dayOrNight?(this.backgroundClass=t.getStorageSync("backgroundColor"),t.setStorage({key:"dayOrNight",data:!0})):(this.backgroundClass="night",t.setStorage({key:"dayOrNight",data:!1}))},colorActive:function(t){return this.activeColor===t?"active":""},changeFontSize:function(o){this.fontSize+=o,this.fontSize<=28||this.fontSize>=70?this.fontSize-=o:(t.setStorage({key:"fontSize",data:this.fontSize}),this.fontClass="font"+this.fontSize)},showChapter:function(){var t=this;this.ctrlBottomIndex=1,this.chapterStatus=!0,this.chapterListShow=!0,this.menuStatus=!1,e.default.getChapter({id:this.bookData.id},(function(o){t.chapterListData=o.data}))},handleShadow:function(){this.ctrlBottomIndex=-1,this.chapterListShow=!1},changebackground:function(o){this.activeColor=o,this.backgroundClass="background"+o,t.setStorage({key:"backgroundColor",data:"background"+o})},backPage:function(){t.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},getChapterReq:function(o,a,n){var i=this;a<0?t.showToast({title:"已是第一章",position:"bottom"}):a>this.chapterTotal?t.showToast({title:"已是最后一章",position:"bottom"}):(t.showLoading({title:"加载中"}),this.controlStatus=!1,e.default.getRecChapter({bookId:o,num:a},(function(o){i.chapterData=o.data[0],console.log(i.chapterData),t.hideLoading(),i.$nextTick((function(){console.log(this.$refs),console.log(this.chapterData.chapterNum),n&&n(),this.addBookShelf&&this.updateBookShelf(this.bookData.id,this.chapterData.chapterNum)}))})))},isBookShelfed:function(o){var a=this,n=t.getStorageSync("userId");e.default.get("/bookshelf/exits",{userId:n,bookId:o},(function(t){t.data&&(a.addBookShelf=!0)}))},hasReadCard:function(o,a){var n=t.getStorageSync("userId");e.default.get("/readcard/exits",{userId:n,bookId:o},(function(t){a&&a(t)}))},addToReadCard:function(o,a){var n=t.getStorageSync("userId");e.default.post("/readcard",{userId:n,bookId:o},(function(t){a&&a(t)}))},updateReadCard:function(o,a){var n=t.getStorageSync("userId");e.default.put("/readcard",{userId:n,bookId:o},(function(t){a&&a(t)}))},updateBookShelf:function(o,a){var n=t.getStorageSync("userId");e.default.put("/bookshelf",{userId:n,bookId:o,chapterNum:a})},leaveDetail:function(){t.getStorageSync("userId");console.log("离开页面，询问是否加入书架")}},onLoad:function(o){var a=this;t.showLoading({title:"加载中"}),console.log(o),e.default.getBook({id:o.bookId},(function(t){console.log(t.data),a.bookData=t.data.data[0],a.chapterTotal=t.data.chapterTotal,console.log(a.chapterTotal,"llls")})),this.getChapterReq(o.bookId,o.chapterNum,(function(){a.controlStatus=!0})),t.$on("clickShadow",this.handleShadow),t.$on("selectChapter",this.selectChapter),t.getStorage({key:"fontSize",success:function(t){a.fontSize=t.data,a.fontClass="font"+a.fontSize},fail:function(){t.setStorage({key:"fontSize",data:40})}}),t.getStorage({key:"backgroundColor",success:function(t){a.backgroundClass=t.data,a.activeColor=parseInt(a.backgroundClass.substring(10)),console.log(a.activeColor,a.backgroundClass.substring(10),"llk")},fail:function(){t.setStorage({key:"backgroundColor",data:"background0"})}}),t.getStorage({key:"token",success:function(t){t.data;a.isBookShelfed(o.bookId),a.hasReadCard(o.bookId,(function(t){console.log(t),t.data?a.updateReadCard(o.bookId):a.addToReadCard(o.bookId)}))}})},mounted:function(){this.screenWidth=t.getSystemInfoSync().windowWidth}};o.default=c}).call(this,a("543d")["default"])}},[["b063","common/runtime","common/vendor"]]]);