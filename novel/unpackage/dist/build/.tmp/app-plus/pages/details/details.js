(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/details/details"],{"1d83":function(t,e,o){"use strict";o.r(e);var a=o("6f72"),i=o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,function(){return a[t]})}(n);e["default"]=i.a},"2c56":function(t,e,o){},"4d7c":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=(t._self._c,t.bookStatus());t.$mp.data=Object.assign({},{$root:{m0:o}})},i=[];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return i})},"6f56":function(t,e,o){"use strict";o.r(e);var a=o("8294"),i=o("f307");for(var n in i)"default"!==n&&function(t){o.d(e,t,function(){return i[t]})}(n);o("c9c3");var s=o("2877"),r=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=r.exports},"6f72":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={props:{bookData:{type:Object,default:null},chapterListData:{type:Array,default:function(){return[]}}},data:function(){return{scrollTop:0,orderDesc:!0}},methods:{bookStatus:function(){switch(this.bookData.status){case 0:return"连载中";case 1:return"完结";case 2:return"停更"}},shadowBoxClick:function(){t.$emit("clickShadow",{})},selectChapter:function(e){t.$emit("clickShadow",{}),t.$emit("selectChapter",{num:e})},orderChange:function(){this.orderDesc=!this.orderDesc,this.chapterListData=this.chapterListData.reverse()}},mounted:function(){var e=this;t.getSystemInfo({success:function(t){e.$nextTick(function(){e.$refs.scrollView.$el.style.height=t.windowHeight+"px"})}})}};e.default=o}).call(this,o("6e42")["default"])},8294:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.ctrlBottomIndex=3},t.e1=function(e){t.ctrlBottomIndex=4})},i=[];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return i})},aac0:function(t,e,o){"use strict";var a=o("c2be"),i=o.n(a);i.a},b063:function(t,e,o){"use strict";(function(t){o("b9b0"),o("921b");a(o("66fd"));var e=a(o("6f56"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},c2be:function(t,e,o){},c887:function(t,e,o){"use strict";o.r(e);var a=o("4d7c"),i=o("1d83");for(var n in i)"default"!==n&&function(t){o.d(e,t,function(){return i[t]})}(n);o("aac0");var s=o("2877"),r=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=r.exports},c9c3:function(t,e,o){"use strict";var a=o("2c56"),i=o.n(a);i.a},ef04:function(t,e,o){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(o("c887")),n=r(o("7f90")),s=r(o("00d1"));function r(t){return t&&t.__esModule?t:{default:t}}var c={components:{chapterList:i.default},data:function(){return{menuStatus:!0,dayOrNight:!0,backgroudColor:["#E6DFBD","#4EEE94","#FFF0F5","#40E0D0","#EED8AE"],fontSize:40,activeColor:0,ctrlBottomIndex:-1,bookData:{id:1,name:"九星霸体诀",authorName:"平凡的魔术师",status:0,imgSrc:"../../static/images/mingren.jpg"},addBookShelf:!1,chapterStatus:!1,screenWidth:0,chapterTotal:10,backNum:0,chapterData:{},chapterListData:[]}},methods:{changeMenuStatus:function(){this.ctrlBottomIndex=-1,this.menuStatus?this.$nextTick(function(){this.$refs.ctrlTop.$el.style.top="0",this.$refs.ctrlBottom.$el.style.bottom="0",this.menuStatus=!this.menuStatus}):this.$nextTick(function(){this.$refs.ctrlTop.$el.style.top=-this.$refs.ctrlTop.$el.offsetHeight+"px",this.$refs.ctrlBottom.$el.style.bottom=-this.$refs.ctrlBottom.$el.offsetHeight+"px",this.menuStatus=!this.menuStatus})},chapterHandle:function(e){this.getChapterReq(this.bookData.id,this.chapterData.chapterNum+e),t.pageScrollTo({scrollTop:0,duration:100})},selectChapter:function(e){this.getChapterReq(this.bookData.id,e.num),t.pageScrollTo({scrollTop:0,duration:100})},changeDayNight:function(){this.ctrlBottomIndex=2,this.dayOrNight=!this.dayOrNight,this.dayOrNight?(this.$refs.novelDetails.$el.style.backgroundColor=this.backgroudColor[this.activeColor],this.$refs.novelDetails.$el.style.color="#333",t.setStorage({key:"dayOrNight",data:!0})):(this.$refs.novelDetails.$el.style.backgroundColor="#1B1D19",this.$refs.novelDetails.$el.style.color="#fff",t.setStorage({key:"dayOrNight",data:!1}))},colorActive:function(t){return this.activeColor===t?"active":""},changeFontSize:function(e){this.fontSize+=e,this.fontSize<=28||this.fontSize>=70?this.fontSize-=e:(t.setStorage({key:"fontSize",data:this.fontSize}),this.$refs.novelContent.$el.style.fontSize=this.fontSize/2+"px")},showChapter:function(){var t=this;this.ctrlBottomIndex=1,this.chapterStatus=!0,this.menuStatus=!1,this.changeMenuStatus(),this.$nextTick(function(){this.$refs.chapterList.$el.style.left="0px"}),n.default.getChapter({id:this.bookData.id},function(e){t.chapterListData=e.data})},handleShadow:function(){this.ctrlBottomIndex=-1,this.chapterStatus=!1,this.$nextTick(function(){this.$refs.chapterList.$el.style.left=-this.screenWidth+"px"})},changebackground:function(e){this.activeColor=e,this.$refs.novelDetails.$el.style.backgroundColor=this.backgroudColor[e],t.setStorage({key:"backgroundColor",data:this.backgroudColor[e]})},backPage:function(){t.navigateBack({delta:1,animationType:"pop-out",animationDuration:200})},getChapterReq:function(e,o){var i=this;o<0?t.showToast({title:"已是第一章",position:"bottom"}):o>this.chapterTotal?t.showToast({title:"已是最后一章",position:"bottom"}):(t.showLoading({title:"加载中"}),n.default.getRecChapter({bookId:e,num:o},function(e){i.chapterData=e.data[0],console.log(a(i.chapterData," at pages\\details\\details.vue:227")),i.chapterData.content=s.default.pToView(i.chapterData.content,"data-v-1b0037f2"),t.hideLoading(),i.$nextTick(function(){console.log(a(this.$refs," at pages\\details\\details.vue:231")),this.$refs.novelContent.$el.innerHTML=this.chapterData.content,console.log(a(this.chapterData.chapterNum," at pages\\details\\details.vue:233")),this.updateBookShelf(this.bookData.id,this.chapterData.chapterNum)})}))},isBookShelfed:function(t){var e=this;n.default.get("/bookshelf/exits",{userId:"123456",bookId:t},function(t){t.data&&(e.addBookShelf=!0)})},updateBookShelf:function(t,e){n.default.put("/bookshelf",{userId:"123456",bookId:t,chapterNum:e})}},onLoad:function(e){var o=this;console.log(a(e," at pages\\details\\details.vue:257")),n.default.getBook({id:e.bookId},function(t){console.log(a(t.data," at pages\\details\\details.vue:260")),o.bookData=t.data.data[0],o.chapterTotal=t.data.chapterTotal}),this.getChapterReq(e.bookId,e.chapterNum),t.$on("clickShadow",this.handleShadow),t.$on("selectChapter",this.selectChapter),this.isBookShelfed(e.bookId),t.getStorage({key:"fontSize",success:function(t){o.fontSize=t.data,o.$nextTick(function(){this.$refs.novelContent.$el.style.fontSize=this.fontSize/2+"px"})},fail:function(){t.setStorage({key:"fontSize",data:"40"})}}),t.getStorage({key:"backgroundColor",success:function(t){for(var e=0;e<o.backgroudColor.length;e++)if(o.backgroudColor[e]===t.data){o.activeColor=e,o.$nextTick(function(){this.$refs.novelDetails.$el.style.backgroundColor=this.backgroudColor[e]});break}},fail:function(){t.setStorage({key:"fontSize",data:o.backgroudColor[0]})}}),t.getStorage({key:"dayOrNight",success:function(t){o.dayOrNight=!t.data,console.log(a(t.data,o.dayOrNight," at pages\\details\\details.vue:311")),o.$nextTick(function(){this.changeDayNight()})},fail:function(){t.setStorage({key:"dayOrNight",data:!0})}})},mounted:function(){var e=this;t.getSystemInfo({success:function(t){e.screenWidth=t.windowWidth}}),this.$nextTick(function(){this.$refs.ctrlTop.$el.style.top=-this.$refs.ctrlTop.$el.offsetHeight+"px",this.$refs.ctrlBottom.$el.style.bottom=-this.$refs.ctrlBottom.$el.offsetHeight+"px",this.$refs.chapterList.$el.style.left=-this.screenWidth+"px"})}};e.default=c}).call(this,o("6e42")["default"],o("0de9")["default"])},f307:function(t,e,o){"use strict";o.r(e);var a=o("ef04"),i=o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,function(){return a[t]})}(n);e["default"]=i.a}},[["b063","common/runtime","common/vendor"]]]);